import { GameBoard } from "../gameBoard.js";

const gameBoard = new GameBoard;

test("Create New Board", ()=> {

    expect(gameBoard.board).toStrictEqual([ [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                         ]);
})

test("Add ship to board", ()=> {

    gameBoard.newBoard()
    gameBoard.addShip("Destroyer", 2, 3)
    expect(gameBoard.board).toStrictEqual([ [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,1,1,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                          ]);
    gameBoard.addShip("Submarine", 5, 4)
    expect(gameBoard.board).toStrictEqual([ [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,1,1,0,0,0,0,0,0],
                                            [0,0,0,0,0,2,2,2,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                          ]);
    gameBoard.rotateShip("Cruiser")
    gameBoard.addShip("Cruiser", 0, 4)
    expect(gameBoard.board).toStrictEqual([ [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,1,1,0,0,0,0,0,0],
                                            [3,0,0,0,0,2,2,2,0,0],
                                            [3,0,0,0,0,0,0,0,0,0],
                                            [3,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                          ]);
    gameBoard.addShip("BattleShip", 0, 0)
    expect(gameBoard.board).toStrictEqual([ [4,4,4,4,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,1,1,0,0,0,0,0,0],
                                            [3,0,0,0,0,2,2,2,0,0],
                                            [3,0,0,0,0,0,0,0,0,0],
                                            [3,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                          ]);
    gameBoard.addShip("Carrier", 5, 9)
    expect(gameBoard.board).toStrictEqual([ [4,4,4,4,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,1,1,0,0,0,0,0,0],
                                            [3,0,0,0,0,2,2,2,0,0],
                                            [3,0,0,0,0,0,0,0,0,0],
                                            [3,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,5,5,5,5,5]
                                          ]);
})

test("Ignore incorrect ship placement", ()=>{

    gameBoard.newBoard()
    gameBoard.addShip("Carrier", 7, 0)
    expect(gameBoard.board).toStrictEqual([ [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                         ]);
  
    gameBoard.addShip("Carrier", 5, 5)
    gameBoard.rotateShip("BattleShip")
    gameBoard.addShip("BattleShip", 6, 3)
    expect(gameBoard.board).toStrictEqual([ [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,5,5,5,5,5],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0],
                                            [0,0,0,0,0,0,0,0,0,0]
                                         ]);
})

test("attack the coords", ()=>{
  gameBoard.newBoard()
  gameBoard.addShip("Carrier", 4, 0)
  gameBoard.recieveAttack(6, 0)
  gameBoard.recieveAttack(5, 0)
  expect(gameBoard.board).toStrictEqual([ [0,0,0,0,5,"X","X",5,5,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0]
                                       ]);
  gameBoard.recieveAttack(4, 2)
  expect(gameBoard.board).toStrictEqual([ [0,0,0,0,5,"X","X",5,5,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,"O",0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0],
                                          [0,0,0,0,0,0,0,0,0,0]
                                       ]);
})